---
title: "AveragePresion(平均適合率)"
date: 2023-04-05T00:00:00+09:00
---
# AveragePresion(平均適合率)

物体検出でのクラスの一致率を求めるのに使用する指標

各再現率r**以上**における適合率のmaxを$P_{interp}(r) = \max (\tilde{r})$とすると,平均適合率APは以下の式になる。

$$
AP = \frac{1}{11}\sum_{r \in {0, 0.1 , 0.2 , 0.3 , 0.4 , ... , 1.0}}P_{interp}(r)
$$

※0から0.1刻みで1.0まで再現率を移動させて得た適合率のmax11個に対する平均をとる

## 計算方法

特定の再現率以上で得られる適合率のmaxの総和を取っていく

例:

| 適合率 | 再現率  |
|--------|--------|
| 1.0    | 0.2    |
| 0.5    | 0.4    |
| 0.4    | 0.4    |
| 0.2    | 0.7    |
| 0.3    | 1.0    |

上記の場合、AverPresionは$AP = \frac{1}{N}\sum_{r \in {0, 0.1 , 0.2 , 0.3 , 0.4 , ... , 1.0}}P_{interp}(r)$に当てはめる

- 再現率0.0以上のときの適合率の最大値 : 1.0
- 再現率0.1以上のときの適合率の最大値 : 1.0
- 再現率0.2以上のときの適合率の最大値 : 1.0
- 再現率0.3以上のときの適合率の最大値 : 0.5
- 再現率0.4以上のときの適合率の最大値 : 0.5
- 再現率0.5以上のときの適合率の最大値 : 0.3
- 再現率0.6以上のときの適合率の最大値 : 0.3
...
- 再現率1.0以上のときの適合率の最大値 : 0.3

上記の結果から求めると

$$
AP = \frac{1}{11}(1.0 + 1.0 + 1.0 + 0.5 + 0.5 + 0.3 + 0.3 + 0.3 + 0.3 + 0.3 + 0.3)\\
= 0.52 
$$